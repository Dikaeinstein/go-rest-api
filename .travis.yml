language: go
sudo: true
go:
- 1.11.x
env:
  global:
  - secure: ajIfibAbRakRWTU7besSDwymLm6Xsx0H6punz3gPv9YS3RTOMFRHod9pwBpW5Q/+LDQuzQN6YobyNnY0k9U9K38Mt6th9d/Jjz4i5Mf8wgY2F2IIJvGEapjq8A6qNbh2WtBZ2FFG85wxQyIzwPMDe8q3noGC6xtBU3UD7uBKo8S70ruIOUnHG+QAAStVoe2i5S+JEXk8u8OQtfr+i7DdY9/TVdUrrvOw2e/6Qd5LXgTZ5YHlw6Klp6Z51fGZHr6kszLKwo175ZTY3BtYElBXZ0Q8cKaC2LKnUw38jK/YavKdr906EkjYJ4yPWDZ/Hxe9ZKj45IEVZ4qFzcrm0vh4tccmL9F5D2MiwTnedRy7Jv1puMq+Q4x7pUS/KvvReRUyN873X6eIIDdHZneWszMfcg2O7QPG74UXx7v3R+CE3JGRgvYgPemk7Zlh5br4lR/7DIzDGAURhLkmYwsNKrBBF/KiLafxp9ihpQnl8C+asjl5SEWUYSF3nARUSDLmd9nwhPWqHV9VQ8EH80G0QDb2pVUt28dT+dD1bWxRKGBsQKOf1Y5fSZMy3zNas2s6WIdzyI1Kk41azvPwi/TmwODA4uJh2Q2nPEFL/4DB+3djzw171x5m9OzYFn5akCuoZnwlpVBKwG4DP3Sea2uh39+nfNQgfC9Xpqfum4LS/SGSfJM=
  - secure: qIeuyZChH3D82jVgvyB3stbuGdZVsaja2x/AiuPOnG230VQDrXeOgIshrqZspw5qr7e7OFqcuS5TUoYLm5+/lsNCt1J40ktt/fGj2dMVU/Jr7nj0kmx0wHlX8HpV2Xdo6zqY3rcS/d1S40uV1jl+QsmknMaty7MoKn+tJuZiYtVWUOADcT7RE01sAYqtn91cbmSKLR+98sWOFPGxuFSakaQVdSCwiqYyOGaQrqVZViyhosgbu/EICU6DUooqmWIptPuNQmvTn5gBnotpoiWocub5zeJ7IuuLcYGRRF2YwYF2qHYG4nQPAq6IKMnLDwL3Fz3B6C2x+twPlMkyW16MS99hS761dcHhfljIUGY63PXMPhAxckOjjep4Brz1/gKYMZPQ9FtB3mLf02YBQKwfA9NtmxUoMUe91XuWIekHWGS2eif8QnNC/H8q8Ar+pNgzjP/ThxQQQ8ZQmH+FmQ3SM1E/hzF2cG/3/JukYNLWmx+m0tiBhvPpPXedafT1NGthg7YSPC1NZvkFhIPFgeVaB3ybb2vtdXmyE+5WagtOcVIAYlhOBiJ8qbqn5Ddi9zzwbXoDuW057DuFgEtGqfOVcXCzwwo9wCCBOgw4jx5r6c7UmR5Q6kUgDj2cSjZiqgDv3rXkBi+BPnXIr82I8rxHUUzbTAB1LdLt7ZyQA5y38ZU=
  - secure: EcPJanpbuLtPyJqU//o47Zx4vhLA6l4kxfDSEP1ELaQAvRBYLZGDTvO7V08LYoGt3S8IerOghw0E4WgvKpgetWfFMFstDo81OWbnmql3hJqel0BitQB/oEaIssPWhsr5/TfbywuvhSbBczKXpDOOtiAV6pnZ5mJGujtTx6hK9WHPM0VaAyoOUP+xYvt9m+/udGSCQqeFWWxdP6oemqOkSR5t3C4djWNsFhnwnhXEM4SpCiTMx4P3OiY6J7DmCHkVfTTHH8sQUibDt7WsiNPoQO0Uemeqqn8IEnp+T/9zwS6Fmcn0u9YYFLwXUMNJcCTXV6+PHQikdoeUgky9FlK1CdhPJ5g7PCLOGFNqKfHK8L7uMRedC2JL021lieogE3oEXO6fqvVSC0KqLekVDtUk+i01vTcdm16bycduM0o/NpHu36tif7Zwsou1SnsAwSgNcM3UlqzPt4KXEQhwKx1Exe/2o+wVJINb7o22+cUFavje9sw0dWkZhbRAlvxyFZfzNQA5OfErq1lO/JUV8pjXs3Lju6nZXmLnryHXVpLHg8pVhuU2S55ZT4OMJAt/z8Erjltm9KCbRLipbWPjxmfLFQESw14kdP2OVCQ4kDCevK/c+8jacN74luYyPs3NotGGOS+3jKlfCb+TXxao0TyUt9N/VX1laG18sgBb+rrDmJw=
  - secure: sEKssFE/apkqMzbEBd7g852xKVermQGrJIahBKcsm9bwPfi5njEk38l2CIhOE42Dv+qCc3rTs2oBKMmElrOAhgxGcKrD8QMTtKXrTUv8MxkUQO6N5t8pWIMnv/2tsBQGX0KbLa8MN+VoPcJRXwEo4+97VTYeUdxUTQJEQQMTaumbWNrOEFq8AiOTqUDYuuRN4kvTN5wlu/sMai3rT17Z3aOt5KmKDwT+9zYsYITbr1dUT/N5JNOHCwynZO4cRivlx5cMBoxh7Wxk3iWkgSX78pNz3dwPzf+9eWFpp+pl7AMn0b8OaWYgPsVAb9AeH7Z+1SxqwKUGWh2VyAPb+nuFgWf9qUS8a2tHBqClJDrXSCu90FfdGi8aKAWrAOYWQQEfAvGqM9HlwMs7jTK0gB8K7stBDqFf11I29RTOMtdG+1MoANJo0a6YGQWSYpDhAW0Ds7oWh6sIEjge+jymcWvb7JKYtfFWxO8SFWxCdEV7LskIC8bQoV+gDAHt646s+MQtuTPjGzN3rhx0dxHgCk75IFnwgz57qsFJPycLwQYfnuaXYndLUFokd2y4SyXmM3ATnlzyWSfX3gbSRJjkzcyrWgT4TjItKmngr/M6MHSk0tFpate6bEZ5qc+qj7Ym8GUgdVP5Xx6jDYnTZMb5bFPJUS7/R1D1sBzW5zdEy5MmNa8=
  - secure: eHCPpY5BIagHBukSFgtG4MTVWJLwgySCPBbHiGmKZyjPbttwKonJjTAB7kJyr/k6YIoe1Zy5PmjPRLcijFAlXHsrtkR94dgBI1xZ+J585vTyClqxrciCzh7Mpyz/cywOfk/a+Pm3FybqEhU3BygYetFz2y3zJR4nyeml/jHHfhk82j6P9cTr3QixaKmYUo8d9hujZqWQEcSIH/odU1qSpKvYVEaY4BSG+O7Hhjx5fn3Fj6DJw5nqKhWBw66co8XSd2fAh/Ln7cIkthWfAtjZyCxxagDoI6WFh3J6w0NayO41TIoeeH+tdGTp+sNnDDIGwAFxmXdyCgb20lTOTvpEa1CrcuvIm2kA8CIBdfF0zLLYoMbWcrScuP5GBZATXFYHW8sZv8h6B6J5QP7UzHRUecpGEXMpaTsXUCt6gsmeaABPYcNDMFfW0VNUIEtkzuecRwoUSgE3UfJYJUlkZWQbuncqhLDoo0WNh18GH+5k9lHkItXcf/VcGPevR2BMBZufW+HCsJu2xA71R/ERVVPNFe8RnBKbsMv40JFcQobAD5XCDsjy2Us9nTd5/rmdFxvgJuMEuYpB1eEKCt/OmNkxwhvmwkgOB6+5hQdZjnJA/bZSN/72Tm2ERGzJu/Fvzrs+1ZI/nZGmgcop+CkMdmCjtLA2xG2rnFq4071LYhBNQsU=
  - secure: kYqgxVc2zv54WI84cZt1wUocZlHJHR/+fvEMuK8CDoyoisMAsv3b9WFvmaj9cF3oCGfpvXw+TfyPc7V9czUYWXKo7IveMn9TJrHdbiGN4QqG604o052GfXGXLDGL6fKG5KBX3jGf4x/xKzfCk0RxkBFPAzxX7itcR938UlF2qydsiKQe/M9FkkeIB6ccHkjQDCm0ThNa8qqd/Q4oTb0nt/UFh47mdoR2i12mwRv4f20H4VL41CCyK3oZZfJFVCDTTx73Kr4AYOplvJQi3w3+FQa6mI5qrJfrOlmmt4sA/06VJ0i/hAfRL0hZuS5wSBzMMNAefWoVgWTbf7jotrbmsTu+u5DRn+1grFqa2WswuX9+F7deFUXPJ8h93yM4bPuph6fnQJ0oUtOQyGNQ11844bogjYoku8SMEr2ocD1BeowVx9bKaXIgSxLCNQqPFPho6ulPaGEQYqDtuDDobAxP8cOi01aLPCFjLwWAm7mV+9BJHeNZSgHYhfNI77iQsEAyaRJAaxiF2n4cR86MzKfYdyr340zWW8gtCbjhA9V8Slwmu0GAyM3EYeRvTxqpxMGPb5pEVaSiZg5jhpTXYhQG5I8+U+ieluTVJEwAXKY6bV9Ck+eu4vY4Ro/h8SROtaUzj4oJTPm1JCbOIPKqoZPBTCeHzlsTurejclNdlFCz2vM=
  - secure: RuAHNfkBDQ8VBHDJTaAE92985ULI+ki61WVOeLuonzx5lOvXFjzQU88kNwOpnHdJgNEKv1JUMX1SXW3fQZnXKoUP8IY0jVaGiz/DRpdtOcMjAYWAtz58OMX/9yhVlaIveve+ezlheaajzF3pzLp3WwXpBO2EHu5cU5+rp4D4Vrz63kCnGFRgxeOuTr5A6rflb0E3xqD5k8+P+eGSwZ8k/Cvk7yDfxGagErflR/FxuMRitfCyuv+bsRWmLZujVFY9M6acvi1YEtql01drUz9iZhbewrb51e0mGDbFdNy9nTrDaVjbnL1xXJVCwDHIRAV1lpVyFYzfJZR40z8+Y6qepD1214CBcHvI68Wmjm7lyxQ3Ll7FDSjwUpP5V2vCjvNfSg7on361mhCo4WpeYdhbKrrjGc/3Yui237BGPLQv5FUjBgqevDArlSg8MicjPlV7ZoFOG7IZQqa4VTUaQ7jzxEiA683DWG//fRgh3TUomUt/iQCEGItvSBRP2AHK/b8tkdgc3YBr8D27oSpYZXiRYMqAdyMj+x9ds8TYqZEpaU0hwynWMnNixVuYjSp7sDX2Vr17nl4/jK5HjYduioYt/M1uMS2I0PP9eUI5sbGGfkwcuq180m7GBw5drpfRdIxGVLrPnlr4XxegN19EMr4xPgadgCaVm9sc5t1+mTNE8GU=
  - secure: Tes9yB/wMv5Lo0HgYP/vG9VBm+QDHfoUXdZrPPt0E83fSrZBq1CAUwsQBOgQSwN07Hb1lmy2sLlSrga6iQIMJglfiW4BeFPZ2NfymZq2CKKObMpQGkm4p42W88NAmwMKgfsIb9/bNRHGCIIZ1FSfR41+7Rlcb6Ich3pceRI/+ONIvKQvP+y17z+UZlFo2PVvlxMQpHYhJq58WMeIzY4emS4XJMubXsreayW8hhSevw+DWtc6ouGoR6T2H/0WcXcY6DFTT8MGOF9GSuHhP/d3sTIWTkep3QSuryKsSqMCBe68CVbQjfQy7GFxOuNV6lpWM1am1a5f6yCZ50iDex46aHySfHj00PuEePyO47Tb8SZFwzAvT1tUm22lm81YOnb0L/bKtt3dBY9pkv19vtW+n8yk8lsqHTn0W/HohCk3mlCnoAayHXWbXfObk8CijWbmqV3jAadvhA2VwsAr8cwNgV9+XLB7FDSc75VlCFNNrVHgX703YNAVvUQZ1FhE9O4fUNOqr7GYLZ2MgXP8xLT99Z5GzdclmlKNkTJVzrKvBJnM3PHIZAo5+1fah4GwZaley+oF3Wl3Fgcsb6MHI6gt4aATTC8f5BV49M85dlqzQcAEgB5R1OmXh6AK/Asy4BtGlUkIbM1ADhbqceBAnJdAHwxelRxXQJPkg1NImy+El18=
services:
  - postgresql
before_script:
  - psql -c 'create database travis_ci_test;' -U postgres
script:
  - make install
  - make test
  - make build
before_deploy:
  - go get -u github.com/kardianos/govendor
  - govendor sync
  - docker build -t registry.heroku.com/dikaeinstein-go-rest-api/web .
  - curl https://cli-assets.heroku.com/install.sh | sh
  - heroku --version
  # - export WEB_DOCKER_IMAGE_ID=$(docker images --filter=reference=registry.heroku.com/dikaeinstein-go-rest-api/web --format "{{.ID}}")
deploy:
  provider: script
  script: chmod +x ./heroku_push.sh && ./heroku_push.sh
